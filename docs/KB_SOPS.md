# База SOPs & Playbooks

## Назначение

Здесь живут стандартизированные процедуры (SOP, Standard Operating Procedures) и тактические сценарии (Playbooks), которые превращают разовый опыт в воспроизводимые алгоритмы. Это один из ключевых элементов системы, обеспечивающий устойчивость и масштабируемость: любой повторяемый процесс должен быть описан и версионирован.

## Структура базы данных

### Основные поля

#### Title
- **Тип**: Текст
- **Описание**: Название процедуры или сценария
- **Пример**: "Создание нового лота на eBay US"

#### Type
- **Тип**: Select
- **Описание**: Тип документа
- **Варианты**: 
  - SOP — стандартная операционная процедура
  - Playbook — тактический сценарий
- **Пример**: "SOP"

#### Category
- **Тип**: Select
- **Описание**: Категория процедуры
- **Варианты**: 
  - Listing — создание листингов
  - Order — обработка заказов
  - Support — поддержка клиентов
  - Compliance — соответствие требованиям
  - Troubleshooting — решение проблем
  - Other — другое
- **Пример**: "Listing"

#### Goal
- **Тип**: Текст (длинный)
- **Описание**: Цель процедуры (что именно достигается и как это измеряется)
- **Пример**: "Создать новый листинг на eBay US с соблюдением всех требований платформы. Критерий успеха: листинг опубликован и проходит проверку Compliance-Agent"

#### Steps
- **Тип**: Текст (длинный, с нумерацией)
- **Описание**: Детальный алгоритм действий (шаги 1, 2, 3…)
- **Формат**: Нумерованный список
- **Пример**: 
  ```
  1. Открыть eBay Seller Hub
  2. Выбрать "Sell an item"
  3. Ввести название товара
  4. Выбрать категорию
  ...
  ```

#### Screenshots / Templates
- **Тип**: Files или Links
- **Описание**: Скриншоты, шаблоны сообщений, ссылки на формы
- **Пример**: [Скриншот 1], [Шаблон описания товара]

#### Related Workflows
- **Тип**: Links
- **Описание**: Ссылки на соответствующие n8n‑воркфлоу, API‑доки, скрипты в репозитории
- **Пример**: 
  - n8n workflow: [product-sourcing.json]
  - API Docs: [eBay API Documentation]
  - Script: [scripts/setup/create-listing.sh]

#### Prerequisites
- **Тип**: Текст
- **Описание**: Что нужно иметь/знать перед выполнением
- **Пример**: "Активный аккаунт eBay US, готовый товар с описанием и фото"

#### Estimated time
- **Тип**: Number
- **Описание**: Ориентировочное время выполнения
- **Единица измерения**: минуты
- **Пример**: 15

#### Status
- **Тип**: Select
- **Описание**: Статус процедуры
- **Варианты**: 
  - draft — черновик
  - active — активна
  - outdated — устарела
  - archived — архивирована
- **Пример**: "active"

#### Version
- **Тип**: Number
- **Описание**: Версия процедуры
- **Пример**: 1.2

#### Last updated
- **Тип**: Date
- **Описание**: Дата последнего обновления
- **Пример**: 2024-01-20

#### Author
- **Тип**: Person
- **Описание**: Автор процедуры
- **Пример**: Иван Иванов

## Примеры записей

### Пример 1: SOP - Создание листинга

```
Title: Создание нового лота на eBay US
Type: SOP
Category: Listing
Goal: Создать новый листинг на eBay US с соблюдением всех требований платформы. Критерий успеха: листинг опубликован и проходит проверку Compliance-Agent.

Steps:
1. Открыть eBay Seller Hub
2. Выбрать "Sell an item"
3. Ввести название товара (использовать шаблон из KB_TECH_DOCS)
4. Выбрать категорию (Cameras & Photo > Digital Cameras)
5. Заполнить Item Specifics (Brand, Model, Megapixels, Sensor Type)
6. Добавить описание (использовать шаблон, проверить через Compliance-Agent)
7. Загрузить фото (минимум 5, первое фото — главное)
8. Установить цену (использовать Pricing-Agent для проверки)
9. Выбрать Business Policy (Payment, Shipping, Returns)
10. Проверить через Compliance-Agent
11. Опубликовать листинг

Screenshots: [Скриншот Seller Hub], [Скриншот Item Specifics]
Related Workflows: 
  - n8n: [listing-creation.json]
  - Compliance check: [compliance-agent.md]
Prerequisites: Активный аккаунт eBay US, готовый товар, фото, описание
Estimated time: 15 минут
Status: active
Version: 1.3
Last updated: 2024-01-20
Author: Иван Иванов
```

### Пример 2: Playbook - Обработка бана

```
Title: Что делать при бане/лимите аккаунта
Type: Playbook
Category: Troubleshooting
Goal: Восстановить доступ к аккаунту или минимизировать потери. Критерий успеха: аккаунт восстановлен или создан план действий.

Steps:
1. Определить причину бана (проверить уведомления от платформы)
2. Оценить серьёзность (временный бан, постоянный, лимит)
3. Если временный бан:
   a. Дождаться окончания срока
   b. Проверить соответствие политике
   c. Обратиться в поддержку с запросом на досрочное снятие
4. Если постоянный бан:
   a. Обратиться в поддержку с объяснением ситуации
   b. Предоставить доказательства исправления проблемы
   c. Если не помогло — рассмотреть создание нового аккаунта
5. Если лимит:
   a. Проанализировать причины лимита
   b. Улучшить метрики (рейтинг, скорость обработки заказов)
   c. Обратиться в поддержку с запросом на увеличение лимита
6. Задокументировать кейс в KB_ERRORS

Related Workflows:
  - Support ticket template: [support-ticket-template.md]
  - Account recovery checklist: [account-recovery.md]
Prerequisites: Доступ к аккаунту или уведомления от платформы
Estimated time: 30-60 минут (зависит от сложности)
Status: active
Version: 2.1
Last updated: 2024-01-15
Author: Мария Петрова
```

### Пример 3: SOP - Обработка заказа

```
Title: Обработка заказа через AutoDS
Type: SOP
Category: Order
Goal: Обработать заказ от момента получения до подтверждения доставки. Критерий успеха: заказ выполнен, клиент получил товар, деньги получены.

Steps:
1. Получить уведомление о новом заказе (Telegram)
2. Проверить заказ в AutoDS
3. Проверить наличие товара у поставщика
4. Если товар есть:
   a. Подтвердить заказ в AutoDS
   b. Дождаться автоматического размещения заказа у поставщика
   c. Отследить статус заказа
5. Если товара нет:
   a. Найти альтернативного поставщика (Multi-Sourcing-Agent)
   b. Если альтернативы нет — отменить заказ и уведомить клиента
6. После получения трек-номера:
   a. Обновить статус заказа в системе
   b. Отправить трек-номер клиенту
7. После доставки:
   a. Подтвердить завершение заказа
   b. Запросить отзыв (опционально)

Related Workflows:
  - n8n: [order-fulfillment.json]
  - AutoDS integration: [SETUP_AUTODS.md]
Prerequisites: Настроенный AutoDS, подключённые поставщики
Estimated time: 5-10 минут активной работы (остальное автоматически)
Status: active
Version: 1.0
Last updated: 2024-01-10
Author: Иван Иванов
```

## Рекомендации по использованию

1. **Версионирование**: Всегда обновляйте версию при изменении процедуры
2. **Регулярный пересмотр**: Периодически проверяйте актуальность процедур
3. **Связность**: Связывайте SOP с воркфлоу, скриптами и документацией
4. **Тестирование**: Тестируйте новые процедуры перед публикацией

## Интеграция с системой

База SOPs & Playbooks интегрируется с:
- **n8n workflows** — ссылки на автоматизированные процессы
- **AI агенты** — для использования в принятии решений
- **Training** — для обучения новых участников команды

## См. также

- [KB_MAIN.md](KB_MAIN.md) — главная страница базы знаний
- [KB_ERRORS.md](KB_ERRORS.md) — база ошибок и инцидентов
- [Шаблон для Notion](../../templates/notion/sops-template.md)

